(()=>{const e=wp.element.createElement,{__:n}=wp.i18n,{registerBlockType:s}=wp.blocks,{InspectorControls:c,useBlockProps:d}=wp.blockEditor,{PanelBody:k,TextControl:a,ToggleControl:p,RangeControl:o,Notice:h,Disabled:u}=wp.components,b=wp.serverSideRender;s("klohn-kit/calendar",{title:n("KK Calendar","klohn-kit"),icon:"calendar-alt",category:"widgets",description:n("Render a calendar from an ICS URL (server-side).","klohn-kit"),attributes:{icsUrl:{type:"string",default:""},start:{type:"string",default:""},end:{type:"string",default:""},max:{type:"number",default:999},groupByMonth:{type:"boolean",default:!0},cacheMinutes:{type:"number",default:0},linkText:{type:"string",default:"\xBB Details"}},supports:{html:!1,align:!0},edit:g=>{const{attributes:r,setAttributes:l}=g,{icsUrl:i,start:m,end:C,max:v,groupByMonth:y,cacheMinutes:x,linkText:M}=r,f=d({className:"kk-calendar-block"}),w=e(c,{},e(k,{title:n("Calendar","klohn-kit"),initialOpen:!0},e(a,{label:n("ICS URL","klohn-kit"),value:i,onChange:t=>l({icsUrl:t}),placeholder:"https://calendar.google.com/calendar/ical/.../public/basic.ics"}),e(a,{label:n("Start (YYYY-MM-DD)","klohn-kit"),value:m,onChange:t=>l({start:t}),placeholder:"2026-01-01"}),e(a,{label:n("End (YYYY-MM-DD)","klohn-kit"),value:C,onChange:t=>l({end:t}),placeholder:"2026-12-31"}),e(o,{label:n("Max events","klohn-kit"),value:v,onChange:t=>l({max:t}),min:1,max:2e3}),e(p,{label:n("Group by month","klohn-kit"),checked:!!y,onChange:t=>l({groupByMonth:!!t})}),e(o,{label:n("Cache minutes (0 = no cache)","klohn-kit"),value:x,onChange:t=>l({cacheMinutes:t}),min:0,max:1440}),e(a,{label:n("Link text","klohn-kit"),value:M,onChange:t=>l({linkText:t})}))),R=i?e("div",{style:{border:"1px dashed rgba(0,0,0,.15)",padding:"10px",borderRadius:"8px"}},e(u,{},e(b,{block:"klohn-kit/calendar",attributes:r}))):e(h,{status:"warning",isDismissible:!1},n("Set an ICS URL to preview the calendar.","klohn-kit"));return e("div",f,w,R)},save:()=>null})})();
