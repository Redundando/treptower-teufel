/* assets/src/scss/components/_table.scss
   Gutenberg Table block style: core/table + "compact"
   Markup:
   <figure class="wp-block-table is-style-compact">
     <table>...</table>
     <figcaption>...</figcaption>
   </figure>
*/

figure.wp-block-table.is-style-compact {
  /* flat panel wrapper */
  background: var(--panel-bg);
  border: var(--panel-border);
  border-radius: var(--panel-radius);

  /* big tables shouldn’t break layout */
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;

  /* optional: if you want tighter than other panels, keep this off */
  /* padding: var(--panel-pad); */

  container-type: inline-size;
  container-name: kk-table;
}

/* Table reset + collapse to avoid “double borders” */
figure.wp-block-table.is-style-compact table {
  width: 100%;
  margin: 0;

  border: 0;
  background: transparent;

  border-collapse: collapse; /* important */
  border-spacing: 0;
}

/* Cells: compact + dotted “meta” grid */
figure.wp-block-table.is-style-compact th,
figure.wp-block-table.is-style-compact td {
  padding: var(--space-xs) var(--space-s);
  font-size: var(--fs-body-s);
  line-height: 1.45;
  vertical-align: top;

  /* wipe WP defaults then apply our grid */
  border: 0;
  border: var(--border-meta);
}

figure.wp-block-table.is-style-compact thead {
  border-bottom: var(--border-1);
}

/* Header row: subtle tint + stronger weight */
figure.wp-block-table.is-style-compact thead th {
  background: var(--surface-tint);
  font-weight: 600;
  color: var(--color-text);
}

/* Optional footer: same treatment as header, but separated */
figure.wp-block-table.is-style-compact tfoot th,
figure.wp-block-table.is-style-compact tfoot td {
  background: var(--surface-tint);
  font-weight: 600;
}

/* Remove OUTER cell borders so you only get:
   - solid panel outline (figure border)
   - dotted grid inside
*/
figure.wp-block-table.is-style-compact tr:first-child > * { border-top: 0; }
figure.wp-block-table.is-style-compact tr:last-child  > * { border-bottom: 0; }
figure.wp-block-table.is-style-compact tr > *:first-child { border-left: 0; }
figure.wp-block-table.is-style-compact tr > *:last-child  { border-right: 0; }

/* WP often wraps content in <p> inside cells */
figure.wp-block-table.is-style-compact th > p,
figure.wp-block-table.is-style-compact td > p {
  margin: 0;
}

/* Keep lists readable but not airy */
figure.wp-block-table.is-style-compact :where(ul, ol) {
  margin: 0;
  padding-left: 1.2em;
}

figure.wp-block-table.is-style-compact :where(li) {
  margin: 0;
}

/* Numbers look nicer in columns */
figure.wp-block-table.is-style-compact td {
  font-variant-numeric: tabular-nums;
}

/* Caption as meta line */
figure.wp-block-table.is-style-compact figcaption {
  margin: 0;
  padding: var(--space-xs) var(--space-s);

  font-size: var(--fs-meta);
  line-height: var(--lh-meta);
  color: var(--color-muted);

  border-top: var(--border-meta);
}

/* Responsive density */
@container kk-table (max-width: 40rem) {
  figure.wp-block-table.is-style-compact th,
  figure.wp-block-table.is-style-compact td {
    padding: var(--space-xs);
    font-size: var(--fs-meta);
  }
}

@container kk-table (max-width: 26rem) {
  figure.wp-block-table.is-style-compact th,
  figure.wp-block-table.is-style-compact td {
    padding: var(--space-xs);
  }
}
