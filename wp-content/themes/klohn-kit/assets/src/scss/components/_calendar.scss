// assets/src/scss/components/_calendar.scss
@use "../utils/layout" as l;

/* Base calendar wrapper (usable anywhere) */
.kk-calendar {
  container-type: inline-size;
  container-name: kk-calendar;

  /* component aliases (map to global tokens) */
  --cal-radius: var(--panel-radius);
  --cal-border: var(--panel-border);
  --cal-bg: var(--panel-bg);

  --cal-gap: var(--space-m);
  --cal-pad-y: var(--space-s);
  --cal-pad-x: var(--space-m);
}

/* When inserted into post/page content: keep prose width */
.entry-content .kk-calendar {
  max-width: var(--prose-width);
  margin-left: auto;
  margin-right: auto;
  margin-bottom: var(--space-m);
}

/* ---------------------------
   Month heading
--------------------------- */

.kk-calendar__month {
  margin: var(--space-xl) 0 var(--space-s);
  padding: 0 0 var(--space-s);
}

.kk-calendar__month:first-child {
  margin-top: 0;
}

/* ---------------------------
   Entry (panel/card)
--------------------------- */

.kk-calendar__entry {
  margin: 0 0 var(--cal-gap);
  padding: var(--cal-pad-y) var(--cal-pad-x);

  background: var(--cal-bg);
  border: var(--cal-border);
  border-radius: var(--cal-radius);

  display: grid;
  grid-template-columns: 1fr;
  row-gap: var(--space-xs);
  align-items: start;
}

.kk-calendar__entry:last-child {
  margin-bottom: 0;
}

/* ---------------------------
   Meta line (date/time) — matches news density
--------------------------- */

.kk-calendar__when {
  margin: 0;

  font-size: var(--fs-meta);
  line-height: var(--lh-meta);
  color: var(--color-muted);
  font-variant-numeric: tabular-nums;

  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-s);

  /* keep it visually compact */
  padding: 0;
}

/* default: make the “when” parts sit on one line where possible */
.kk-calendar__when .kk-when__line,
.kk-calendar__when .kk-when__sep {
  display: inline;
}

.kk-calendar__when .kk-when__sep {
  opacity: 0.75;
}

/* ---------------------------
   Title — dotted divider like news
--------------------------- */

.kk-calendar__title {
  margin: 0;

  font-size: var(--fs-h3);
  line-height: 1.2;
  font-weight: 600;

  border-top: var(--border-meta);
  padding: var(--space-xs) 0 var(--space-xs);
}

/* ---------------------------
   Description
--------------------------- */

.kk-calendar__desc {
  margin: 0;

  color: var(--text-secondary);
  font-size: var(--fs-body);
  line-height: 1.55;

  /* normalize any stray markup */
  p { margin: 0; }
}

/* Details link (lightweight text action, not a pill/button) */
.kk-calendar__desc a {
  display: block;
  margin-top: var(--space-xs);

  font-size: var(--fs-meta);
  line-height: var(--lh-meta);

  color: var(--color-link);
  text-decoration: none;
}

.kk-calendar__desc a:hover,
.kk-calendar__desc a:focus-visible {
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* ---------------------------
   Container queries
--------------------------- */

/* Narrow: allow the “when” info to stack cleanly */
@container kk-calendar (max-width: 40rem) {
  .kk-calendar__entry {
    padding: var(--space-s);
  }

  .kk-calendar__when {
    gap: var(--space-xs);
  }

  .kk-calendar__when .kk-when__line {
    display: block;
  }

  .kk-calendar__when .kk-when__sep {
    display: none;
  }

  .kk-calendar__title {
    font-size: var(--fs-body);
    padding-top: var(--space-s);
  }

  .kk-calendar__desc {
    font-size: var(--fs-body-s);
  }
}

/* Very narrow: slightly tighter month spacing */
@container kk-calendar (max-width: 26rem) {
  .kk-calendar__month {
    margin: var(--space-l) 0 var(--space-s);
    padding-bottom: var(--space-s);
  }
}
